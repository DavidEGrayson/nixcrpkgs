diff '--exclude=testdata' -ur systemd-255-orig/src/basic/glob-util.c systemd-255/src/basic/glob-util.c
--- systemd-255-orig/src/basic/glob-util.c	2024-05-18 13:21:30.910869411 -0700
+++ systemd-255/src/basic/glob-util.c	2024-05-18 13:54:21.508786894 -0700
@@ -19,9 +19,6 @@
 int safe_glob(const char *path, int flags, glob_t *pglob) {
         int k;
 
-        /* We want to set GLOB_ALTDIRFUNC ourselves, don't allow it to be set. */
-        assert(!(flags & GLOB_ALTDIRFUNC));
-
         if (!pglob->gl_closedir)
                 pglob->gl_closedir = closedir_wrapper;
         if (!pglob->gl_readdir)
@@ -34,7 +31,7 @@
                 pglob->gl_stat = stat;
 
         errno = 0;
-        k = glob(path, flags | GLOB_ALTDIRFUNC, NULL, pglob);
+        k = glob(path, flags, NULL, pglob);
         if (k == GLOB_NOMATCH)
                 return -ENOENT;
         if (k == GLOB_NOSPACE)
diff '--exclude=testdata' -ur systemd-255-orig/src/basic/sort-util.h systemd-255/src/basic/sort-util.h
--- systemd-255-orig/src/basic/sort-util.h	2024-05-18 13:21:30.918868898 -0700
+++ systemd-255/src/basic/sort-util.h	2024-05-18 13:35:46.075221094 -0700
@@ -5,6 +5,8 @@
 
 #include "macro.h"
 
+typedef int (*comparison_fn_t) (const void *, const void *);
+
 /* This is the same as glibc's internal __compar_d_fn_t type. glibc exports a public comparison_fn_t, for the
  * external type __compar_fn_t, but doesn't do anything similar for __compar_d_fn_t. Let's hence do that
  * ourselves, picking a name that is obvious, but likely enough to not clash with glibc's choice of naming if
